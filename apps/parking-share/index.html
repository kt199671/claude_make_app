<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParkShare - é§è»Šå ´ã‚·ã‚§ã‚¢ãƒªãƒ³ã‚°ã‚¢ãƒ—ãƒª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 36px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 18px;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .search-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .search-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .search-form {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr auto;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
        }

        .search-input, .search-select {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus, .search-select:focus {
            border-color: #667eea;
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
        }

        .search-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 15px 30px;
            background: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #7f8c8d;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
        }

        .tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 600px;
        }

        .parking-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .parking-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #27ae60;
            transition: all 0.3s ease;
        }

        .parking-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .parking-card.unavailable {
            border-left-color: #e74c3c;
            opacity: 0.7;
        }

        .parking-card.reserved {
            border-left-color: #f39c12;
        }

        .parking-header {
            padding: 20px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }

        .parking-status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .status-available {
            background: #d4edda;
            color: #155724;
        }

        .status-unavailable {
            background: #f8d7da;
            color: #721c24;
        }

        .status-reserved {
            background: #fff3cd;
            color: #856404;
        }

        .parking-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .parking-address {
            color: #7f8c8d;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .parking-features {
            display: flex;
            gap: 15px;
            color: #7f8c8d;
            font-size: 14px;
            flex-wrap: wrap;
        }

        .parking-body {
            padding: 20px;
        }

        .parking-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .parking-amenities {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .amenity-tag {
            background: #f8f9fa;
            color: #666;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
        }

        .parking-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .parking-price {
            font-size: 20px;
            font-weight: bold;
            color: #27ae60;
        }

        .parking-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #f39c12;
            font-size: 14px;
        }

        .book-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .book-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .book-btn:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .list-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: #667eea;
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .amenity-checkboxes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #667eea;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
        }

        .booking-history {
            display: grid;
            gap: 20px;
        }

        .booking-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid #3498db;
        }

        .booking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .booking-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }

        .booking-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-confirmed {
            background: #d4edda;
            color: #155724;
        }

        .status-active {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-completed {
            background: #e2e3e5;
            color: #495057;
        }

        .booking-details {
            color: #666;
            margin-bottom: 10px;
        }

        .booking-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: #667eea;
            color: white;
        }

        .map-placeholder {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 20px;
            border: 2px dashed #e9ecef;
        }

        .filter-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .filter-title {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .search-form {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                overflow-x: auto;
                flex-wrap: nowrap;
            }
            
            .parking-grid {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #7f8c8d;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .owner-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .owner-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        .owner-name {
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ…¿ï¸ ParkShare</h1>
            <p>ç©ºã„ã¦ã„ã‚‹é§è»Šã‚¹ãƒšãƒ¼ã‚¹ã‚’ã‚·ã‚§ã‚¢ã—ã¦ã€éƒ½å¸‚ã®é§è»Šå•é¡Œã‚’è§£æ±º</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalSpaces">2,847</div>
                    <div class="stat-label">ç™»éŒ²é§è»Šå ´</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeUsers">15,234</div>
                    <div class="stat-label">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalBookings">89,567</div>
                    <div class="stat-label">ç·åˆ©ç”¨å›æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="carbonSaved">4.2t</div>
                    <div class="stat-label">CO2å‰Šæ¸›é‡</div>
                </div>
            </div>
        </div>

        <div class="search-section">
            <h2 class="search-title">ğŸ” é§è»Šå ´ã‚’æ¢ã™</h2>
            <div class="search-form">
                <input type="text" class="search-input" id="locationInput" placeholder="ä½æ‰€ãƒ»é§…åãƒ»ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯ã§æ¤œç´¢">
                <input type="datetime-local" class="search-input" id="startTime">
                <input type="datetime-local" class="search-input" id="endTime">
                <select class="search-select" id="vehicleType">
                    <option value="">è»Šç¨®ã‚’é¸æŠ</option>
                    <option value="compact">è»½è‡ªå‹•è»Š</option>
                    <option value="sedan">æ™®é€šè»Š</option>
                    <option value="suv">SUV</option>
                    <option value="van">ãƒãƒ³</option>
                </select>
                <button class="search-btn" onclick="app.searchParkingSpaces()">æ¤œç´¢</button>
            </div>
            
            <div class="map-placeholder">
                ğŸ—ºï¸ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒƒãƒ—ï¼ˆå®Ÿéš›ã®ã‚¢ãƒ—ãƒªã§ã¯åœ°å›³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰<br>
                <small>è¿‘ãã®é§è»Šå ´ã‚’ãƒãƒƒãƒ—ã§ç¢ºèªã§ãã¾ã™</small>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('browse')">ğŸ” é§è»Šå ´ã‚’æ¢ã™</button>
            <button class="tab" onclick="showTab('bookings')">ğŸ“‹ äºˆç´„å±¥æ­´</button>
            <button class="tab" onclick="showTab('list')">ğŸ  é§è»Šå ´ã‚’ç™»éŒ²</button>
        </div>

        <div class="content">
            <div id="browse-tab" class="tab-content">
                <div class="filter-section">
                    <h3 class="filter-title">çµã‚Šè¾¼ã¿æ¤œç´¢</h3>
                    <div class="filter-grid">
                        <div>
                            <label>æ–™é‡‘ï¼ˆ1æ™‚é–“ã‚ãŸã‚Šï¼‰</label>
                            <select class="search-select" id="priceFilter">
                                <option value="">ã™ã¹ã¦</option>
                                <option value="0-200">200å††ä»¥ä¸‹</option>
                                <option value="200-500">200-500å††</option>
                                <option value="500-1000">500-1000å††</option>
                                <option value="1000+">1000å††ä»¥ä¸Š</option>
                            </select>
                        </div>
                        <div>
                            <label>è·é›¢</label>
                            <select class="search-select" id="distanceFilter">
                                <option value="">åˆ¶é™ãªã—</option>
                                <option value="500">500mä»¥å†…</option>
                                <option value="1000">1kmä»¥å†…</option>
                                <option value="2000">2kmä»¥å†…</option>
                            </select>
                        </div>
                        <div>
                            <label>è¨­å‚™</label>
                            <select class="search-select" id="amenityFilter">
                                <option value="">ã™ã¹ã¦</option>
                                <option value="covered">å±‹æ ¹ä»˜ã</option>
                                <option value="security">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</option>
                                <option value="ev">EVå……é›»</option>
                            </select>
                        </div>
                        <div>
                            <label>è©•ä¾¡</label>
                            <select class="search-select" id="ratingFilter">
                                <option value="">ã™ã¹ã¦</option>
                                <option value="4">4.0ä»¥ä¸Š</option>
                                <option value="4.5">4.5ä»¥ä¸Š</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="parking-grid" id="parkingGrid">
                    <!-- é§è»Šå ´ã‚«ãƒ¼ãƒ‰ãŒã“ã“ã«å‹•çš„ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
                </div>
            </div>

            <div id="bookings-tab" class="tab-content" style="display: none;">
                <h2 style="margin-bottom: 20px; color: #2c3e50;">ğŸ“‹ äºˆç´„å±¥æ­´</h2>
                <div class="booking-history" id="bookingHistory">
                    <!-- äºˆç´„å±¥æ­´ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
                </div>
            </div>

            <div id="list-tab" class="tab-content" style="display: none;">
                <h2 style="margin-bottom: 30px; color: #2c3e50; text-align: center;">ğŸ  é§è»Šå ´ã‚’ç™»éŒ²ã—ã¦åç›Šã‚’å¾—ã‚‹</h2>
                <form class="list-form" id="listingForm">
                    <div class="form-group">
                        <label class="form-label">é§è»Šå ´å</label>
                        <input type="text" class="form-input" name="name" required placeholder="ä¾‹ï¼šç”°ä¸­é‚¸é§è»Šå ´">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ä½æ‰€</label>
                        <input type="text" class="form-input" name="address" required placeholder="ä¾‹ï¼šæ±äº¬éƒ½æ¸‹è°·åŒº1-1-1">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">1æ™‚é–“ã‚ãŸã‚Šã®æ–™é‡‘ï¼ˆå††ï¼‰</label>
                            <input type="number" class="form-input" name="hourlyRate" required placeholder="ä¾‹ï¼š300" min="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">æœ€å¤§é§è»Šæ™‚é–“</label>
                            <select class="form-select" name="maxDuration" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="2">2æ™‚é–“</option>
                                <option value="4">4æ™‚é–“</option>
                                <option value="8">8æ™‚é–“</option>
                                <option value="24">24æ™‚é–“</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">é§è»Šå¯èƒ½ãªè»Šç¨®</label>
                            <select class="form-select" name="vehicleType" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="compact">è»½è‡ªå‹•è»Šã¾ã§</option>
                                <option value="sedan">æ™®é€šè»Šã¾ã§</option>
                                <option value="suv">SUVã¾ã§</option>
                                <option value="van">ãƒãƒ³ã¾ã§</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">é§è»Šå ´ã®ã‚¿ã‚¤ãƒ—</label>
                            <select class="form-select" name="parkingType" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="driveway">è‡ªå®…é§è»Šå ´</option>
                                <option value="garage">ã‚¬ãƒ¬ãƒ¼ã‚¸</option>
                                <option value="lot">å¹³é¢é§è»Šå ´</option>
                                <option value="commercial">å•†æ¥­é§è»Šå ´</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">åˆ©ç”¨å¯èƒ½æ™‚é–“</label>
                        <div class="form-row">
                            <input type="time" class="form-input" name="availableFrom" required>
                            <input type="time" class="form-input" name="availableTo" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">è¨­å‚™ãƒ»ç‰¹å¾´</label>
                        <div class="amenity-checkboxes">
                            <div class="checkbox-item">
                                <input type="checkbox" name="amenities" value="covered" id="covered">
                                <label for="covered">å±‹æ ¹ä»˜ã</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="amenities" value="security" id="security">
                                <label for="security">é˜²çŠ¯ã‚«ãƒ¡ãƒ©</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="amenities" value="lighting" id="lighting">
                                <label for="lighting">å¤œé–“ç…§æ˜</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="amenities" value="ev" id="ev">
                                <label for="ev">EVå……é›»å™¨</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="amenities" value="wide" id="wide">
                                <label for="wide">å¤§å‹è»Šå¯¾å¿œ</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="amenities" value="easy" id="easy">
                                <label for="easy">å‡ºå…¥ã‚Šã—ã‚„ã™ã„</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">èª¬æ˜ãƒ»æ³¨æ„äº‹é …</label>
                        <textarea class="form-textarea" name="description" placeholder="é§è»Šå ´ã®è©³ç´°ã‚„åˆ©ç”¨ä¸Šã®æ³¨æ„ç‚¹ãŒã‚ã‚Œã°è¨˜è¼‰ã—ã¦ãã ã•ã„..."></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">é§è»Šå ´ã‚’ç™»éŒ²ã™ã‚‹</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        class ParkShareApp {
            constructor() {
                this.parkingSpaces = [
                    {
                        id: 1,
                        name: "ç”°ä¸­é‚¸é§è»Šå ´",
                        address: "æ±äº¬éƒ½æ¸‹è°·åŒºç¥å®®å‰1-1-1",
                        hourlyRate: 300,
                        distance: 0.2,
                        rating: 4.8,
                        reviews: 24,
                        owner: "ç”°ä¸­å¤ªéƒ",
                        vehicleType: "sedan",
                        amenities: ["covered", "security"],
                        description: "ä½å®…è¡—ã®é™ã‹ãªç’°å¢ƒã§ã™ã€‚24æ™‚é–“åˆ©ç”¨å¯èƒ½ã€‚",
                        status: "available",
                        maxDuration: 8
                    },
                    {
                        id: 2,
                        name: "æ¸‹è°·é§…å‰ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°",
                        address: "æ±äº¬éƒ½æ¸‹è°·åŒºé“ç„å‚2-2-2",
                        hourlyRate: 800,
                        distance: 0.1,
                        rating: 4.5,
                        reviews: 156,
                        owner: "å±±ç”°èŠ±å­",
                        vehicleType: "suv",
                        amenities: ["security", "lighting", "ev"],
                        description: "é§…ã‹ã‚‰å¾’æ­©1åˆ†ã®å¥½ç«‹åœ°ã€‚EVå……é›»å™¨å®Œå‚™ã€‚",
                        status: "available",
                        maxDuration: 4
                    },
                    {
                        id: 3,
                        name: "é’å±±ã‚¬ãƒ¬ãƒ¼ã‚¸",
                        address: "æ±äº¬éƒ½æ¸¯åŒºé’å±±3-3-3",
                        hourlyRate: 600,
                        distance: 0.8,
                        rating: 4.9,
                        reviews: 67,
                        owner: "ä½è—¤ä¸€éƒ",
                        vehicleType: "compact",
                        amenities: ["covered", "wide"],
                        description: "å±‹å†…ã‚¬ãƒ¬ãƒ¼ã‚¸ã§å®‰å¿ƒã€‚é«˜ç´šè»Šã‚‚å®‰å…¨ã«é§è»Šã§ãã¾ã™ã€‚",
                        status: "reserved",
                        maxDuration: 24
                    },
                    {
                        id: 4,
                        name: "æ–°å®¿ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°ãƒ­ãƒƒãƒˆ",
                        address: "æ±äº¬éƒ½æ–°å®¿åŒºæ­Œèˆä¼ç”º1-4-4",
                        hourlyRate: 500,
                        distance: 1.2,
                        rating: 4.2,
                        reviews: 89,
                        owner: "éˆ´æœ¨ç¾å’²",
                        vehicleType: "van",
                        amenities: ["security", "easy"],
                        description: "å¤§å‹è»Šã‚‚é§è»Šå¯èƒ½ã€‚24æ™‚é–“å–¶æ¥­ã€‚",
                        status: "available",
                        maxDuration: 12
                    },
                    {
                        id: 5,
                        name: "è¡¨å‚é“ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆé§è»Šå ´",
                        address: "æ±äº¬éƒ½æ¸‹è°·åŒºç¥å®®å‰4-5-5",
                        hourlyRate: 400,
                        distance: 0.5,
                        rating: 4.7,
                        reviews: 34,
                        owner: "é«˜æ©‹é›„äºŒ",
                        vehicleType: "sedan",
                        amenities: ["lighting", "easy"],
                        description: "ä½å®…ã®é§è»Šå ´ã‚’ã‚·ã‚§ã‚¢ã€‚å¹³æ—¥ã®ã¿åˆ©ç”¨å¯èƒ½ã€‚",
                        status: "unavailable",
                        maxDuration: 6
                    },
                    {
                        id: 6,
                        name: "æµæ¯”å¯¿ã‚»ã‚­ãƒ¥ã‚¢ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°",
                        address: "æ±äº¬éƒ½æ¸‹è°·åŒºæµæ¯”å¯¿1-6-6",
                        hourlyRate: 700,
                        distance: 0.9,
                        rating: 4.6,
                        reviews: 112,
                        owner: "å°æ—å¥ˆã€…",
                        vehicleType: "suv",
                        amenities: ["covered", "security", "ev"],
                        description: "æœ€æ–°ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ ã€‚EVå……é›»å¯¾å¿œã€‚",
                        status: "available",
                        maxDuration: 24
                    }
                ];

                this.bookings = [
                    {
                        id: 1,
                        parkingName: "ç”°ä¸­é‚¸é§è»Šå ´",
                        address: "æ±äº¬éƒ½æ¸‹è°·åŒºç¥å®®å‰1-1-1",
                        startTime: "2024-01-15 14:00",
                        endTime: "2024-01-15 18:00",
                        totalCost: 1200,
                        status: "completed"
                    },
                    {
                        id: 2,
                        parkingName: "æ¸‹è°·é§…å‰ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°",
                        address: "æ±äº¬éƒ½æ¸‹è°·åŒºé“ç„å‚2-2-2",
                        startTime: "2024-01-20 09:00",
                        endTime: "2024-01-20 12:00",
                        totalCost: 2400,
                        status: "confirmed"
                    }
                ];

                this.init();
            }

            init() {
                this.renderParkingSpaces();
                this.renderBookings();
                this.setupEventListeners();
                this.updateStats();
                this.setDefaultDateTime();
            }

            setupEventListeners() {
                document.getElementById('listingForm').addEventListener('submit', (e) => this.handleListingSubmit(e));
                
                // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
                ['priceFilter', 'distanceFilter', 'amenityFilter', 'ratingFilter'].forEach(filterId => {
                    document.getElementById(filterId).addEventListener('change', () => this.filterParkingSpaces());
                });
            }

            setDefaultDateTime() {
                const now = new Date();
                const startTime = new Date(now.getTime() + 60 * 60 * 1000); // 1æ™‚é–“å¾Œ
                const endTime = new Date(startTime.getTime() + 2 * 60 * 60 * 1000); // ã•ã‚‰ã«2æ™‚é–“å¾Œ

                document.getElementById('startTime').value = this.formatDateTime(startTime);
                document.getElementById('endTime').value = this.formatDateTime(endTime);
            }

            formatDateTime(date) {
                return date.toISOString().slice(0, 16);
            }

            renderParkingSpaces(spaces = this.parkingSpaces) {
                const grid = document.getElementById('parkingGrid');

                if (spaces.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <h3>è©²å½“ã™ã‚‹é§è»Šå ´ãŒã‚ã‚Šã¾ã›ã‚“</h3>
                            <p>æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = spaces.map(space => this.createParkingCard(space)).join('');
            }

            createParkingCard(space) {
                const statusLabels = {
                    available: 'åˆ©ç”¨å¯èƒ½',
                    unavailable: 'åˆ©ç”¨ä¸å¯',
                    reserved: 'äºˆç´„æ¸ˆã¿'
                };

                const statusClasses = {
                    available: 'status-available',
                    unavailable: 'status-unavailable',
                    reserved: 'status-reserved'
                };

                const amenityLabels = {
                    covered: 'ğŸ  å±‹æ ¹ä»˜ã',
                    security: 'ğŸ”’ é˜²çŠ¯ã‚«ãƒ¡ãƒ©',
                    lighting: 'ğŸ’¡ å¤œé–“ç…§æ˜',
                    ev: 'âš¡ EVå……é›»',
                    wide: 'ğŸš— å¤§å‹è»Šå¯¾å¿œ',
                    easy: 'ğŸ”„ å‡ºå…¥ã‚Šç°¡å˜'
                };

                const vehicleLabels = {
                    compact: 'è»½è‡ªå‹•è»Š',
                    sedan: 'æ™®é€šè»Š',
                    suv: 'SUV',
                    van: 'ãƒãƒ³'
                };

                return `
                    <div class="parking-card ${space.status}">
                        <div class="parking-header">
                            <div class="parking-status ${statusClasses[space.status]}">${statusLabels[space.status]}</div>
                            <div class="parking-title">${space.name}</div>
                            <div class="parking-address">ğŸ“ ${space.address}</div>
                            <div class="owner-info">
                                <div class="owner-avatar">${space.owner.charAt(0)}</div>
                                <div class="owner-name">ã‚ªãƒ¼ãƒŠãƒ¼: ${space.owner}</div>
                            </div>
                            <div class="parking-features">
                                <span>ğŸš— ${vehicleLabels[space.vehicleType]}ã¾ã§</span>
                                <span>ğŸ“ ${space.distance}km</span>
                                <span>â° æœ€å¤§${space.maxDuration}æ™‚é–“</span>
                            </div>
                        </div>

                        <div class="parking-body">
                            <div class="parking-description">${space.description}</div>

                            <div class="parking-amenities">
                                ${space.amenities.map(amenity => `<span class="amenity-tag">${amenityLabels[amenity]}</span>`).join('')}
                            </div>

                            <div class="parking-footer">
                                <div>
                                    <div class="parking-price">Â¥${space.hourlyRate}/æ™‚é–“</div>
                                    <div class="parking-rating">
                                        ${'â˜…'.repeat(Math.floor(space.rating))} ${space.rating} (${space.reviews}ä»¶)
                                    </div>
                                </div>
                                <button class="book-btn" 
                                        onclick="app.bookParkingSpace(${space.id})" 
                                        ${space.status !== 'available' ? 'disabled' : ''}>
                                    ${space.status === 'available' ? 'äºˆç´„ã™ã‚‹' : 'åˆ©ç”¨ä¸å¯'}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderBookings() {
                const container = document.getElementById('bookingHistory');

                if (this.bookings.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <h3>äºˆç´„å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</h3>
                            <p>é§è»Šå ´ã‚’äºˆç´„ã—ã¦ä¾¿åˆ©ãªé§è»Šãƒ©ã‚¤ãƒ•ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼</p>
                        </div>
                    `;
                    return;
                }

                const statusLabels = {
                    confirmed: 'äºˆç´„ç¢ºå®š',
                    active: 'åˆ©ç”¨ä¸­',
                    completed: 'åˆ©ç”¨å®Œäº†'
                };

                container.innerHTML = this.bookings.map(booking => `
                    <div class="booking-card">
                        <div class="booking-header">
                            <div class="booking-title">${booking.parkingName}</div>
                            <div class="booking-status status-${booking.status}">${statusLabels[booking.status]}</div>
                        </div>
                        <div class="booking-details">ğŸ“ ${booking.address}</div>
                        <div class="booking-details">
                            ğŸ• ${booking.startTime} ï½ ${booking.endTime}
                        </div>
                        <div class="booking-details">
                            ğŸ’° åˆè¨ˆæ–™é‡‘: Â¥${booking.totalCost.toLocaleString()}
                        </div>
                        <div class="booking-actions">
                            ${booking.status === 'confirmed' ? '<button class="action-btn">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>' : ''}
                            ${booking.status === 'completed' ? '<button class="action-btn">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã</button>' : ''}
                            <button class="action-btn">è©³ç´°ã‚’è¦‹ã‚‹</button>
                        </div>
                    </div>
                `).join('');
            }

            searchParkingSpaces() {
                const location = document.getElementById('locationInput').value;
                const startTime = document.getElementById('startTime').value;
                const endTime = document.getElementById('endTime').value;
                const vehicleType = document.getElementById('vehicleType').value;

                if (!startTime || !endTime) {
                    alert('åˆ©ç”¨é–‹å§‹æ™‚é–“ã¨çµ‚äº†æ™‚é–“ã‚’é¸æŠã—ã¦ãã ã•ã„');
                    return;
                }

                // ç°¡å˜ãªæ¤œç´¢ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                let filtered = this.parkingSpaces;

                if (location) {
                    filtered = filtered.filter(space => 
                        space.address.toLowerCase().includes(location.toLowerCase()) ||
                        space.name.toLowerCase().includes(location.toLowerCase())
                    );
                }

                if (vehicleType) {
                    const vehicleOrder = ['compact', 'sedan', 'suv', 'van'];
                    const selectedIndex = vehicleOrder.indexOf(vehicleType);
                    filtered = filtered.filter(space => {
                        const spaceIndex = vehicleOrder.indexOf(space.vehicleType);
                        return spaceIndex >= selectedIndex;
                    });
                }

                this.renderParkingSpaces(filtered);
                alert(`${filtered.length}ä»¶ã®é§è»Šå ´ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`);
            }

            filterParkingSpaces() {
                const priceRange = document.getElementById('priceFilter').value;
                const maxDistance = document.getElementById('distanceFilter').value;
                const amenity = document.getElementById('amenityFilter').value;
                const minRating = document.getElementById('ratingFilter').value;

                let filtered = this.parkingSpaces.filter(space => {
                    // æ–™é‡‘ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                    if (priceRange) {
                        const [min, max] = priceRange.split('-').map(p => p === '+' ? Infinity : parseInt(p));
                        if (max && (space.hourlyRate < min || space.hourlyRate > max)) return false;
                        if (!max && space.hourlyRate < min) return false;
                    }

                    // è·é›¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                    if (maxDistance && space.distance * 1000 > parseInt(maxDistance)) return false;

                    // è¨­å‚™ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                    if (amenity && !space.amenities.includes(amenity)) return false;

                    // è©•ä¾¡ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                    if (minRating && space.rating < parseFloat(minRating)) return false;

                    return true;
                });

                this.renderParkingSpaces(filtered);
            }

            bookParkingSpace(spaceId) {
                const space = this.parkingSpaces.find(s => s.id === spaceId);
                if (!space || space.status !== 'available') return;

                const startTime = document.getElementById('startTime').value;
                const endTime = document.getElementById('endTime').value;

                if (!startTime || !endTime) {
                    alert('åˆ©ç”¨æ™‚é–“ã‚’è¨­å®šã—ã¦ã‹ã‚‰äºˆç´„ã—ã¦ãã ã•ã„');
                    return;
                }

                const start = new Date(startTime);
                const end = new Date(endTime);
                const hours = (end - start) / (1000 * 60 * 60);
                const totalCost = Math.ceil(hours * space.hourlyRate);

                const confirmation = confirm(`
                    ${space.name}ã‚’äºˆç´„ã—ã¾ã™ã‹ï¼Ÿ
                    
                    åˆ©ç”¨æ™‚é–“: ${start.toLocaleString()} ï½ ${end.toLocaleString()}
                    æ™‚é–“: ${hours}æ™‚é–“
                    æ–™é‡‘: Â¥${totalCost.toLocaleString()}
                `);

                if (confirmation) {
                    // æ–°ã—ã„äºˆç´„ã‚’è¿½åŠ 
                    const newBooking = {
                        id: this.bookings.length + 1,
                        parkingName: space.name,
                        address: space.address,
                        startTime: start.toLocaleString(),
                        endTime: end.toLocaleString(),
                        totalCost: totalCost,
                        status: 'confirmed'
                    };

                    this.bookings.unshift(newBooking);

                    // é§è»Šå ´ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
                    space.status = 'reserved';

                    alert('äºˆç´„ãŒå®Œäº†ã—ã¾ã—ãŸï¼äºˆç´„å±¥æ­´ã§ã”ç¢ºèªãã ã•ã„ã€‚');

                    // è¡¨ç¤ºã‚’æ›´æ–°
                    this.renderParkingSpaces();
                    this.renderBookings();
                    this.updateStats();
                }
            }

            handleListingSubmit(e) {
                e.preventDefault();

                const formData = new FormData(e.target);
                const amenities = formData.getAll('amenities');
                
                const newSpace = {
                    id: this.parkingSpaces.length + 1,
                    name: formData.get('name'),
                    address: formData.get('address'),
                    hourlyRate: parseInt(formData.get('hourlyRate')),
                    distance: Math.random() * 2, // ãƒ©ãƒ³ãƒ€ãƒ ãªè·é›¢
                    rating: 0,
                    reviews: 0,
                    owner: "ã‚ãªãŸ", // å®Ÿéš›ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼å
                    vehicleType: formData.get('vehicleType'),
                    amenities: amenities,
                    description: formData.get('description') || "æ–°è¦ç™»éŒ²ã®é§è»Šå ´ã§ã™ã€‚",
                    status: "available",
                    maxDuration: parseInt(formData.get('maxDuration'))
                };

                this.parkingSpaces.unshift(newSpace);

                alert('é§è»Šå ´ãŒæ­£å¸¸ã«ç™»éŒ²ã•ã‚Œã¾ã—ãŸï¼æ‰¿èªå¾Œã«å…¬é–‹ã•ã‚Œã¾ã™ã€‚');
                e.target.reset();

                // é§è»Šå ´ä¸€è¦§ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆ
                showTab('browse');
                this.renderParkingSpaces();
                this.updateStats();
            }

            updateStats() {
                const totalSpaces = document.getElementById('totalSpaces');
                const activeUsers = document.getElementById('activeUsers');
                const totalBookings = document.getElementById('totalBookings');
                const carbonSaved = document.getElementById('carbonSaved');

                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã§æ•°å€¤ã‚’æ›´æ–°
                this.animateCounter(totalSpaces, parseInt(totalSpaces.textContent.replace(/,/g, '')), 2847 + Math.floor(Math.random() * 50));
                this.animateCounter(activeUsers, parseInt(activeUsers.textContent.replace(/,/g, '')), 15234 + Math.floor(Math.random() * 100));
                this.animateCounter(totalBookings, parseInt(totalBookings.textContent.replace(/,/g, '')), 89567 + Math.floor(Math.random() * 200));
                
                // CO2å‰Šæ¸›é‡ã®æ›´æ–°
                const currentCarbon = parseFloat(carbonSaved.textContent.replace('t', ''));
                const newCarbon = currentCarbon + Math.random() * 0.1;
                carbonSaved.textContent = `${newCarbon.toFixed(1)}t`;
            }

            animateCounter(element, start, end) {
                const duration = 1000;
                const startTime = performance.now();

                const updateCounter = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);

                    const current = Math.floor(start + (end - start) * progress);
                    element.textContent = current.toLocaleString();

                    if (progress < 1) {
                        requestAnimationFrame(updateCounter);
                    }
                };

                requestAnimationFrame(updateCounter);
            }
        }

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
        function showTab(tabName) {
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤º
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });

            // ã™ã¹ã¦ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã‹ã‚‰activeã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
            document.getElementById(`${tabName}-tab`).style.display = 'block';

            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ãƒœã‚¿ãƒ³ã«activeã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            event.target.classList.add('active');
        }

        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
        let app;
        document.addEventListener('DOMContentLoaded', () => {
            app = new ParkShareApp();
        });
    </script>
</body>
</html> 