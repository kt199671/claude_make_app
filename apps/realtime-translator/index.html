<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Chat - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¿»è¨³ãƒãƒ£ãƒƒãƒˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 95%;
            max-width: 800px;
            height: 90vh;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            margin-bottom: 10px;
            font-size: 28px;
        }

        .language-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }

        .language-select {
            padding: 8px 15px;
            border: none;
            border-radius: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .language-select:hover {
            background: rgba(255,255,255,0.3);
        }

        .chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 15px;
            max-width: 80%;
            animation: fadeIn 0.3s ease;
        }

        .message.sent {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .message.received {
            background: white;
            border: 1px solid #e9ecef;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .message-original {
            font-size: 16px;
            margin-bottom: 8px;
        }

        .message-translated {
            font-size: 14px;
            opacity: 0.8;
            font-style: italic;
            border-top: 1px solid rgba(255,255,255,0.3);
            padding-top: 8px;
            margin-top: 8px;
        }

        .message.received .message-translated {
            border-top: 1px solid #e9ecef;
        }

        .input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .message-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .message-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .send-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .online-users {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 14px;
            backdrop-filter: blur(10px);
        }

        .typing-indicator {
            padding: 10px 20px;
            color: #666;
            font-style: italic;
            animation: pulse 1.5s infinite;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .connection-status {
            display: flex;
            align-items: center;
            gap: 8px;
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 14px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #4caf50;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @media (max-width: 768px) {
            .container {
                width: 100%;
                height: 100vh;
                border-radius: 0;
            }
            
            .language-selector {
                flex-direction: column;
                gap: 10px;
            }
            
            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="connection-status">
                <div class="status-dot"></div>
                <span>æ¥ç¶šä¸­</span>
            </div>
            <h1>ğŸŒ Global Chat</h1>
            <p>ä¸–ç•Œä¸­ã®äººã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¿»è¨³ãƒãƒ£ãƒƒãƒˆ</p>
            <div class="online-users">ğŸ‘¥ <span id="userCount">1,247</span> ã‚ªãƒ³ãƒ©ã‚¤ãƒ³</div>
            <div class="language-selector">
                <select class="language-select" id="myLanguage">
                    <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                    <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                    <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                    <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                    <option value="pt">ğŸ‡§ğŸ‡· PortuguÃªs</option>
                </select>
                <span>â†’</span>
                <select class="language-select" id="targetLanguage">
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                    <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                    <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                    <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                    <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                    <option value="pt">ğŸ‡§ğŸ‡· PortuguÃªs</option>
                </select>
            </div>
        </div>
        
        <div class="chat-area" id="chatArea">
            <div class="message received">
                <div class="message-original">Hello! Welcome to Global Chat! ğŸ‘‹</div>
                <div class="message-translated">ã“ã‚“ã«ã¡ã¯ï¼Global Chatã¸ã‚ˆã†ã“ãï¼ğŸ‘‹</div>
            </div>
            <div class="message received">
                <div class="message-original">Â¡Hola a todos desde EspaÃ±a!</div>
                <div class="message-translated">ã‚¹ãƒšã‚¤ãƒ³ã‹ã‚‰ã¿ãªã•ã‚“ã“ã‚“ã«ã¡ã¯ï¼</div>
            </div>
            <div class="message received">
                <div class="message-original">Bonjour de Paris! Comment allez-vous?</div>
                <div class="message-translated">ãƒ‘ãƒªã‹ã‚‰ã“ã‚“ã«ã¡ã¯ï¼ãŠå…ƒæ°—ã§ã™ã‹ï¼Ÿ</div>
            </div>
        </div>
        
        <div class="typing-indicator" id="typingIndicator" style="display: none;">
            èª°ã‹ãŒå…¥åŠ›ä¸­...
        </div>
        
        <div class="input-area">
            <input type="text" class="message-input" id="messageInput" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..." maxlength="500">
            <button class="send-btn" id="sendBtn">
                <span>é€ä¿¡</span>
                <span>ğŸš€</span>
            </button>
        </div>
    </div>

    <script>
        class GlobalChatApp {
            constructor() {
                this.chatArea = document.getElementById('chatArea');
                this.messageInput = document.getElementById('messageInput');
                this.sendBtn = document.getElementById('sendBtn');
                this.userCount = document.getElementById('userCount');
                this.typingIndicator = document.getElementById('typingIndicator');
                this.myLanguage = document.getElementById('myLanguage');
                this.targetLanguage = document.getElementById('targetLanguage');
                
                this.currentUserCount = 1247;
                this.typingTimeout = null;
                this.isConnected = true;
                
                this.translations = {
                    'ja': {
                        'Hello! Welcome to Global Chat! ğŸ‘‹': 'ã“ã‚“ã«ã¡ã¯ï¼Global Chatã¸ã‚ˆã†ã“ãï¼ğŸ‘‹',
                        'Â¡Hola a todos desde EspaÃ±a!': 'ã‚¹ãƒšã‚¤ãƒ³ã‹ã‚‰ã¿ãªã•ã‚“ã“ã‚“ã«ã¡ã¯ï¼',
                        'Bonjour de Paris! Comment allez-vous?': 'ãƒ‘ãƒªã‹ã‚‰ã“ã‚“ã«ã¡ã¯ï¼ãŠå…ƒæ°—ã§ã™ã‹ï¼Ÿ',
                        'Good morning from Tokyo!': 'æ±äº¬ã‹ã‚‰ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼',
                        'How is everyone doing today?': 'ä»Šæ—¥ã¯ã¿ãªã•ã‚“ã„ã‹ãŒãŠéã”ã—ã§ã™ã‹ï¼Ÿ',
                        'The weather is beautiful here!': 'ã“ã¡ã‚‰ã¯å¤©æ°—ãŒã¨ã¦ã‚‚è‰¯ã„ã§ã™ï¼',
                        'I love this app! So easy to talk to people worldwide!': 'ã“ã®ã‚¢ãƒ—ãƒªå¤§å¥½ãã§ã™ï¼ä¸–ç•Œä¸­ã®äººã¨è©±ã™ã®ãŒã¨ã¦ã‚‚ç°¡å˜ï¼',
                        'What time is it in your country?': 'ã‚ãªãŸã®å›½ã§ã¯ä»Šä½•æ™‚ã§ã™ã‹ï¼Ÿ'
                    },
                    'en': {
                        'ã“ã‚“ã«ã¡ã¯ï¼Global Chatã¸ã‚ˆã†ã“ãï¼ğŸ‘‹': 'Hello! Welcome to Global Chat! ğŸ‘‹',
                        'ã‚¹ãƒšã‚¤ãƒ³ã‹ã‚‰ã¿ãªã•ã‚“ã“ã‚“ã«ã¡ã¯ï¼': 'Hello everyone from Spain!',
                        'ãƒ‘ãƒªã‹ã‚‰ã“ã‚“ã«ã¡ã¯ï¼ãŠå…ƒæ°—ã§ã™ã‹ï¼Ÿ': 'Hello from Paris! How are you?',
                        'æ±äº¬ã‹ã‚‰ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼': 'Good morning from Tokyo!',
                        'ä»Šæ—¥ã¯ã¿ãªã•ã‚“ã„ã‹ãŒãŠéã”ã—ã§ã™ã‹ï¼Ÿ': 'How is everyone doing today?',
                        'ã“ã¡ã‚‰ã¯å¤©æ°—ãŒã¨ã¦ã‚‚è‰¯ã„ã§ã™ï¼': 'The weather is beautiful here!',
                        'ã“ã®ã‚¢ãƒ—ãƒªå¤§å¥½ãã§ã™ï¼ä¸–ç•Œä¸­ã®äººã¨è©±ã™ã®ãŒã¨ã¦ã‚‚ç°¡å˜ï¼': 'I love this app! So easy to talk to people worldwide!',
                        'ã‚ãªãŸã®å›½ã§ã¯ä»Šä½•æ™‚ã§ã™ã‹ï¼Ÿ': 'What time is it in your country?'
                    }
                };
                
                this.init();
            }
            
            init() {
                this.sendBtn.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.sendMessage();
                    } else {
                        this.showTyping();
                    }
                });
                
                this.myLanguage.addEventListener('change', () => this.updateLanguage());
                this.targetLanguage.addEventListener('change', () => this.updateLanguage());
                
                // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ›´æ–°
                this.updateUserCount();
                
                // ãƒ©ãƒ³ãƒ€ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å®šæœŸçš„ã«è¿½åŠ 
                this.startRandomMessages();
                
                // åˆæœŸåŒ–æ™‚ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æœ€ä¸‹éƒ¨ã«
                this.scrollToBottom();
            }
            
            sendMessage() {
                const message = this.messageInput.value.trim();
                if (!message) return;
                
                const myLang = this.myLanguage.value;
                const targetLang = this.targetLanguage.value;
                
                // è‡ªåˆ†ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
                this.addMessage(message, this.translateText(message, myLang, targetLang), true);
                
                this.messageInput.value = '';
                this.scrollToBottom();
                
                // ç›¸æ‰‹ã‹ã‚‰ã®è¿”ä¿¡ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
                setTimeout(() => {
                    this.simulateResponse();
                }, Math.random() * 3000 + 1000);
            }
            
            addMessage(original, translated, isSent = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isSent ? 'sent' : 'received'}`;
                messageDiv.innerHTML = `
                    <div class="message-original">${original}</div>
                    ${translated && translated !== original ? `<div class="message-translated">${translated}</div>` : ''}
                `;
                
                this.chatArea.appendChild(messageDiv);
                this.scrollToBottom();
            }
            
            translateText(text, fromLang, toLang) {
                if (fromLang === toLang) return text;
                
                // ç°¡å˜ãªç¿»è¨³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                const translationDict = this.translations[toLang];
                if (translationDict && translationDict[text]) {
                    return translationDict[text];
                }
                
                // ã‚ˆã‚Šé«˜åº¦ãªç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ã“ã“ã§å®Ÿè£…ã§ãã¾ã™
                const commonTranslations = {
                    'Hello': { ja: 'ã“ã‚“ã«ã¡ã¯', es: 'Hola', fr: 'Bonjour', de: 'Hallo', zh: 'ä½ å¥½', ko: 'ì•ˆë…•í•˜ì„¸ìš”' },
                    'Thank you': { ja: 'ã‚ã‚ŠãŒã¨ã†', es: 'Gracias', fr: 'Merci', de: 'Danke', zh: 'è°¢è°¢', ko: 'ê°ì‚¬í•©ë‹ˆë‹¤' },
                    'Good morning': { ja: 'ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™', es: 'Buenos dÃ­as', fr: 'Bonjour', de: 'Guten Morgen', zh: 'æ—©ä¸Šå¥½', ko: 'ì¢‹ì€ ì•„ì¹¨' }
                };
                
                for (const [english, translations] of Object.entries(commonTranslations)) {
                    if (text.toLowerCase().includes(english.toLowerCase()) && translations[toLang]) {
                        return text.replace(new RegExp(english, 'gi'), translations[toLang]);
                    }
                }
                
                return `[ç¿»è¨³: ${text}]`;
            }
            
            showTyping() {
                this.typingIndicator.style.display = 'block';
                clearTimeout(this.typingTimeout);
                
                this.typingTimeout = setTimeout(() => {
                    this.typingIndicator.style.display = 'none';
                }, 2000);
            }
            
            updateUserCount() {
                setInterval(() => {
                    const change = Math.floor(Math.random() * 21) - 10; // -10 to +10
                    this.currentUserCount = Math.max(1000, this.currentUserCount + change);
                    this.userCount.textContent = this.currentUserCount.toLocaleString();
                }, 5000);
            }
            
            updateLanguage() {
                // è¨€èªå¤‰æ›´æ™‚ã®å‡¦ç†
                console.log(`è¨€èªè¨­å®š: ${this.myLanguage.value} â†’ ${this.targetLanguage.value}`);
            }
            
            startRandomMessages() {
                const randomMessages = [
                    'Good morning from Tokyo!',
                    'How is everyone doing today?',
                    'The weather is beautiful here!',
                    'I love this app! So easy to talk to people worldwide!',
                    'What time is it in your country?',
                    'ã“ã‚“ã«ã¡ã¯ï¼æ—¥æœ¬ã‹ã‚‰ã§ã™ï¼',
                    'Buongiorno dall\'Italia! ğŸ‡®ğŸ‡¹',
                    'Guten Tag aus Deutschland! ğŸ‡©ğŸ‡ª',
                    'Hej frÃ¥n Sverige! ğŸ‡¸ğŸ‡ª'
                ];
                
                setInterval(() => {
                    if (Math.random() < 0.3) { // 30%ã®ç¢ºç‡
                        const randomMessage = randomMessages[Math.floor(Math.random() * randomMessages.length)];
                        const targetLang = this.targetLanguage.value;
                        this.addMessage(randomMessage, this.translateText(randomMessage, 'en', targetLang), false);
                    }
                }, 8000);
            }
            
            simulateResponse() {
                const responses = [
                    'That\'s interesting! Tell me more!',
                    'Hello from Brazil! ğŸ‡§ğŸ‡·',
                    'Nice to meet you!',
                    'I agree! This app is amazing!',
                    'How\'s the weather there?'
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                const targetLang = this.targetLanguage.value;
                this.addMessage(randomResponse, this.translateText(randomResponse, 'en', targetLang), false);
            }
            
            scrollToBottom() {
                this.chatArea.scrollTop = this.chatArea.scrollHeight;
            }
        }
        
        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            new GlobalChatApp();
        });
    </script>
</body>
</html> 