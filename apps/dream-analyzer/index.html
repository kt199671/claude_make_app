<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- App Metadata -->
    <meta name="app-name" content="Â§¢Êó•Ë®òAIËß£Êûê">
    <meta name="app-version" content="1.0.0">
    <meta name="app-created-by" content="Claude Sonnet 4">
    <meta name="app-created-date" content="2025-06-20">
    <meta name="app-model-id" content="claude-sonnet-4-20250514">
    <meta name="app-category" content="AI„ÉªÂàÜÊûê">
    <meta name="app-tags" content="Â§¢ÂàÜÊûê,ÂøÉÁêÜÂàÜÊûê,AIËß£Êûê,Êó•Ë®ò,Ê∑±Â±§ÂøÉÁêÜ,ÊÑüÊÉÖÂàÜÊûê">
    <meta name="app-target-users" content="12000">
    <meta name="app-last-modified" content="2025-06-20">
    <meta name="app-description" content="AI„ÅåÂ§¢„ÅÆÂÜÖÂÆπ„ÇíÂàÜÊûê„Åó„Å¶ÂøÉÁêÜÁä∂ÊÖã„ÇÑË±°Âæ¥ÁöÑÊÑèÂë≥„ÇíËß£Èáà„Åô„Çã„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥">
    <title>Â§¢Êó•Ë®òAIËß£Êûê</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #2c1810 0%, #1a0f3d 25%, #0d2f5e 50%, #1a4d2e 75%, #3d1a1a 100%);
            background-size: 400% 400%;
            animation: dreamShift 20s ease-in-out infinite;
            color: white;
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
        }

        @keyframes dreamShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(138, 43, 226, 0.3);
        }

        h1 {
            margin: 0;
            font-size: 3rem;
            background: linear-gradient(45deg, #9370db, #4b0082, #663399, #8a2be2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(147, 112, 219, 0.5);
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .dream-input {
            background: rgba(0, 0, 0, 0.8);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(138, 43, 226, 0.3);
        }

        .analysis-panel {
            background: rgba(0, 0, 0, 0.8);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(75, 0, 130, 0.3);
        }

        h2 {
            color: #9370db;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(138, 43, 226, 0.5);
            border-radius: 15px;
            color: white;
            font-size: 16px;
            line-height: 1.6;
            resize: vertical;
            backdrop-filter: blur(10px);
        }

        textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
            font-style: italic;
        }

        .input-helpers {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .helper-tag {
            padding: 8px 15px;
            background: rgba(138, 43, 226, 0.3);
            border: 1px solid #9370db;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .helper-tag:hover {
            background: rgba(138, 43, 226, 0.6);
            transform: scale(1.05);
        }

        button {
            padding: 15px 30px;
            background: linear-gradient(45deg, #9370db, #4b0082);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(147, 112, 219, 0.4);
        }

        .analysis-result {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border-left: 4px solid #9370db;
            backdrop-filter: blur(10px);
        }

        .symbol-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .symbol-card {
            background: rgba(138, 43, 226, 0.2);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(138, 43, 226, 0.4);
            text-align: center;
            transition: all 0.3s ease;
        }

        .symbol-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(138, 43, 226, 0.3);
        }

        .symbol-emoji {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        .symbol-name {
            font-weight: bold;
            color: #dda0dd;
            margin-bottom: 5px;
        }

        .symbol-meaning {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .mood-indicator {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
        }

        .mood-item {
            text-align: center;
            flex: 1;
        }

        .mood-emoji {
            font-size: 2rem;
            display: block;
            margin-bottom: 5px;
        }

        .mood-label {
            font-size: 12px;
            color: #dda0dd;
        }

        .mood-value {
            font-weight: bold;
            margin-top: 5px;
        }

        .dream-history {
            grid-column: 1 / -1;
            background: rgba(0, 0, 0, 0.8);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(138, 43, 226, 0.3);
        }

        .history-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 12px;
            margin: 10px 0;
            border-left: 4px solid #9370db;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        .history-date {
            font-size: 12px;
            color: #dda0dd;
            margin-bottom: 5px;
        }

        .history-preview {
            font-size: 14px;
            line-height: 1.4;
        }

        .keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }

        .keyword {
            padding: 4px 12px;
            background: rgba(147, 112, 219, 0.3);
            border-radius: 15px;
            font-size: 12px;
            color: #dda0dd;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #9370db;
            font-style: italic;
        }

        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(138, 43, 226, 0.2);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(138, 43, 226, 0.4);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #dda0dd;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .input-helpers {
                justify-content: center;
            }
            
            .mood-indicator {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåô Â§¢Êó•Ë®òAIËß£Êûê</h1>
            <p>„ÅÇ„Å™„Åü„ÅÆÂ§¢„ÇíË®òÈå≤„Åó„ÄÅAI„ÅåË±°Âæ¥„ÇÑÊÑèÂë≥„ÇíÂàÜÊûê„Åô„Çã</p>
        </div>

        <div class="main-content">
            <div class="dream-input">
                <h2>üí≠ Â§¢„ÅÆË®òÈå≤</h2>
                
                <textarea id="dreamText" placeholder="‰ªäÊúùË¶ã„ÅüÂ§¢„ÇíË©≥„Åó„ÅèÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ...&#10;&#10;‰æã:&#10;„Éª„Å©„Çì„Å™Â†¥ÊâÄ„Å´„ÅÑ„Åæ„Åó„Åü„ÅãÔºü&#10;„ÉªË™∞„ÅåÁôªÂ†¥„Åó„Åæ„Åó„Åü„ÅãÔºü&#10;„Éª„Å©„Çì„Å™ÊÑüÊÉÖ„ÇíÊÑü„Åò„Åæ„Åó„Åü„ÅãÔºü&#10;„ÉªÂç∞Ë±°ÁöÑ„Å™„Ç∑„Éº„É≥„ÇÑËâ≤„ÅØ„ÅÇ„Çä„Åæ„Åó„Åü„ÅãÔºü&#10;„ÉªÂ§¢„ÅÆ‰∏≠„Åß‰Ωï„Çí„Åó„Å¶„ÅÑ„Åæ„Åó„Åü„ÅãÔºü"></textarea>
                
                <div class="input-helpers">
                    <span class="helper-tag" onclick="addToText('Á©∫„ÇíÈ£õ„Çì„Åß„ÅÑ„Çã')">üïäÔ∏è È£õË°å</span>
                    <span class="helper-tag" onclick="addToText('ËøΩ„ÅÑ„Åã„Åë„Çâ„Çå„Çã')">üèÉ ËøΩË∑°</span>
                    <span class="helper-tag" onclick="addToText('Ê∞¥„ÅÆ‰∏≠„Å´„ÅÑ„Çã')">üåä Ê∞¥</span>
                    <span class="helper-tag" onclick="addToText('È´ò„ÅÑ„Å®„Åì„Çç„Åã„ÇâËêΩ„Å°„Çã')">‚¨áÔ∏è ËêΩ‰∏ã</span>
                    <span class="helper-tag" onclick="addToText('Áü•„Çâ„Å™„ÅÑ‰∫∫')">üë§ Êú™Áü•„ÅÆ‰∫∫</span>
                    <span class="helper-tag" onclick="addToText('ÂãïÁâ©„ÅåÁèæ„Çå„Çã')">üê∫ ÂãïÁâ©</span>
                </div>
                
                <button onclick="analyzeDream()">üîÆ Â§¢„ÇíËß£Êûê„Åô„Çã</button>
                <button onclick="saveDream()">üíæ Â§¢„Çí‰øùÂ≠ò</button>
                <button onclick="clearInput()">üóëÔ∏è „ÇØ„É™„Ç¢</button>
            </div>

            <div class="analysis-panel">
                <h2>üß† AIÂàÜÊûêÁµêÊûú</h2>
                
                <div id="analysisResult">
                    <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.6);">
                        <span style="font-size: 3rem;">üåô</span>
                        <p>Â§¢„ÅÆÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶ÂàÜÊûê„Éú„Çø„É≥„ÇíÊäº„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="dream-history">
            <h2>üìö Â§¢„ÅÆÂ±•Ê≠¥</h2>
            
            <div class="stats-panel">
                <div class="stat-card">
                    <div class="stat-value" id="totalDreams">0</div>
                    <div class="stat-label">Ë®òÈå≤„Åó„ÅüÂ§¢</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="commonMood">üò¥</div>
                    <div class="stat-label">‰∏ÄËà¨ÁöÑ„Å™Ê∞óÂàÜ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgLength">0</div>
                    <div class="stat-label">Âπ≥ÂùáÊñáÂ≠óÊï∞</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="streakDays">0</div>
                    <div class="stat-label">ÈÄ£Á∂öË®òÈå≤Êó•Êï∞</div>
                </div>
            </div>
            
            <div id="dreamHistoryList">
                <div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.6);">
                    „Åæ„Å†Â§¢„ÅåË®òÈå≤„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇÊúÄÂàù„ÅÆÂ§¢„ÇíË®òÈå≤„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ
                </div>
            </div>
        </div>
    </div>

    <script>
        let dreamHistory = JSON.parse(localStorage.getItem('dreamHistory')) || [];
        
        // Â§¢„ÅÆ„Ç∑„É≥„Éú„É´ËæûÊõ∏
        const dreamSymbols = {
            'È£õ': { emoji: 'üïäÔ∏è', name: 'È£õË°å', meaning: 'Ëá™Áî±„Å∏„ÅÆÊÜß„Çå„ÄÅÊùüÁ∏õ„Åã„Çâ„ÅÆËß£Êîæ„ÄÅ‰∏äÊòáÂøóÂêë' },
            'Ê∞¥': { emoji: 'üåä', name: 'Ê∞¥', meaning: 'ÊÑüÊÉÖ„ÄÅÁÑ°ÊÑèË≠ò„ÄÅÊµÑÂåñ„ÄÅÁîüÂëΩÂäõ' },
            'ÁÅ´': { emoji: 'üî•', name: 'ÁÅ´', meaning: 'ÊÉÖÁÜ±„ÄÅÊÄí„Çä„ÄÅÂ§âÂåñ„ÄÅ„Ç®„Éç„É´„ÇÆ„Éº' },
            'ÂãïÁâ©': { emoji: 'üê∫', name: 'ÂãïÁâ©', meaning: 'Êú¨ËÉΩ„ÄÅÈáéÊÄßÁöÑ„Å™Ê¨≤Ê±Ç„ÄÅÂÜÖ„Å™„ÇãÂäõ' },
            'ÂÆ∂': { emoji: 'üè†', name: 'ÂÆ∂', meaning: 'ÂÆâÂÖ®„ÄÅÂÆ∂Êóè„ÄÅËá™ÂàÜËá™Ë∫´„ÅÆÂÜÖÈù¢' },
            'ËøΩ': { emoji: 'üèÉ', name: 'ËøΩË∑°', meaning: 'ÊÅêÊÄñ„ÄÅ„Éó„É¨„ÉÉ„Ç∑„É£„Éº„ÄÅÈÄÉÈÅøÈ°òÊúõ' },
            'ËêΩ': { emoji: '‚¨áÔ∏è', name: 'ËêΩ‰∏ã', meaning: '‰∏çÂÆâ„ÄÅ„Ç≥„É≥„Éà„É≠„Éº„É´„ÅÆÂñ™Â§±„ÄÅÂ§±Êïó„Å∏„ÅÆÊÅê„Çå' },
            'Ê≠ª': { emoji: 'üíÄ', name: 'Ê≠ª', meaning: 'Â§âÂåñ„ÄÅÁµÇ„Çè„Çä„Å®Âßã„Åæ„Çä„ÄÅÂÜçÁîü' },
            'ÈÅì': { emoji: 'üõ§Ô∏è', name: 'ÈÅì', meaning: '‰∫∫Áîü„ÅÆÈÅì„ÅÆ„Çä„ÄÅÈÅ∏Êäû„ÄÅÂ∞ÜÊù•„Å∏„ÅÆÊñπÂêëÊÄß' },
            'Ëªä': { emoji: 'üöó', name: 'Ëªä', meaning: '„Ç≥„É≥„Éà„É≠„Éº„É´„ÄÅ‰∫∫Áîü„ÅÆÈÄ≤Ë∑Ø„ÄÅËá™Á´ã' },
            'Ê©ã': { emoji: 'üåâ', name: 'Ê©ã', meaning: 'Â§âÂåñ„ÅÆÊôÇÊúü„ÄÅ„Å§„Å™„Åå„Çä„ÄÅÈÅéÊ∏°Êúü' },
            'Â±±': { emoji: '‚õ∞Ô∏è', name: 'Â±±', meaning: 'ÁõÆÊ®ô„ÄÅÂõ∞Èõ£„ÄÅÈÅîÊàê„Å∏„ÅÆÈÅì„ÅÆ„Çä' },
            'Êµ∑': { emoji: 'üåä', name: 'Êµ∑', meaning: 'ÁÑ°ÊÑèË≠ò„ÄÅÊÑüÊÉÖ„ÅÆÊ∑±„Åï„ÄÅÊú™Áü•„Å∏„ÅÆÊÅêÊÄñ' },
            'Á©∫': { emoji: '‚òÅÔ∏è', name: 'Á©∫', meaning: 'ÁÑ°Èôê„ÅÆÂèØËÉΩÊÄß„ÄÅËá™Áî±„ÄÅÁ≤æÁ•ûÊÄß' },
            'Ëä±': { emoji: 'üå∏', name: 'Ëä±', meaning: 'Áæé„Åó„Åï„ÄÅÊàêÈï∑„ÄÅÁîüÂëΩÂäõ„ÄÅÊÅãÊÑõ' }
        };
        
        function addToText(text) {
            const textarea = document.getElementById('dreamText');
            const currentText = textarea.value;
            if (currentText) {
                textarea.value = currentText + '„ÄÅ' + text;
            } else {
                textarea.value = text;
            }
        }
        
        function analyzeDream() {
            const dreamText = document.getElementById('dreamText').value.trim();
            
            if (!dreamText) {
                alert('Â§¢„ÅÆÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫
            document.getElementById('analysisResult').innerHTML = '<div class="loading">üîÆ AI„ÅåÂ§¢„ÇíËß£Êûê‰∏≠...<br>Ê∑±Â±§ÂøÉÁêÜ„ÇíË™≠„ÅøÂèñ„Å£„Å¶„ÅÑ„Åæ„Åô...</div>';
            
            // Êì¨‰ººÁöÑ„Å™ÂàÜÊûêÂá¶ÁêÜÔºàÂÆüÈöõ„ÅÆAIÂàÜÊûê„Çí„Ç∑„Éü„É•„É¨„Éº„ÉàÔºâ
            setTimeout(() => {
                const analysis = performDreamAnalysis(dreamText);
                displayAnalysis(analysis);
            }, 2000);
        }
        
        function performDreamAnalysis(dreamText) {
            const words = dreamText.toLowerCase();
            const detectedSymbols = [];
            const keywords = [];
            
            // „Ç∑„É≥„Éú„É´Ê§úÂá∫
            for (const [key, symbol] of Object.entries(dreamSymbols)) {
                if (words.includes(key)) {
                    detectedSymbols.push(symbol);
                }
            }
            
            // „Ç≠„Éº„ÉØ„Éº„ÉâÊäΩÂá∫
            const commonKeywords = ['ÊÑüÊÉÖ', 'ÊÅêÊÄñ', 'Âñú„Å≥', '‰∏çÂÆâ', 'ÊÑõ', 'Âèã‰∫∫', 'ÂÆ∂Êóè', '‰ªï‰∫ã', 'Â≠¶Ê†°', 'Ëâ≤', 'Èü≥', 'ÂåÇ„ÅÑ'];
            commonKeywords.forEach(keyword => {
                if (words.includes(keyword)) {
                    keywords.push(keyword);
                }
            });
            
            // ÊÑüÊÉÖÂàÜÊûêÔºàÁ∞°ÊòìÁâàÔºâ
            const positiveWords = ['Ê•Ω„Åó„ÅÑ', 'Â¨â„Åó„ÅÑ', 'Áæé„Åó„ÅÑ', 'Âπ≥Âíå', 'ÂÆâÂøÉ', 'Âπ∏„Åõ', 'Êòé„Çã„ÅÑ'];
            const negativeWords = ['ÊÄñ„ÅÑ', 'ÊÇ≤„Åó„ÅÑ', '‰∏çÂÆâ', 'Êöó„ÅÑ', 'Áóõ„ÅÑ', 'Ëæõ„ÅÑ', 'Ëã¶„Åó„ÅÑ'];
            
            let positiveScore = 0;
            let negativeScore = 0;
            
            positiveWords.forEach(word => {
                if (words.includes(word)) positiveScore++;
            });
            
            negativeWords.forEach(word => {
                if (words.includes(word)) negativeScore++;
            });
            
            // Â§¢„ÅÆ„Çø„Ç§„ÉóÂà§ÂÆö
            let dreamType = 'Êó•Â∏∏ÁöÑ„Å™Â§¢';
            if (words.includes('È£õ') || words.includes('Á©∫')) dreamType = 'È£õË°å„ÅÆÂ§¢';
            else if (words.includes('ËøΩ') || words.includes('ÈÄÉ„Åí')) dreamType = 'ËøΩË∑°„ÅÆÂ§¢';
            else if (words.includes('Ê∞¥') || words.includes('Êµ∑')) dreamType = 'Ê∞¥„ÅÆÂ§¢';
            else if (words.includes('ËêΩ') || words.includes('È´ò„ÅÑ')) dreamType = 'ËêΩ‰∏ã„ÅÆÂ§¢';
            
            return {
                dreamType,
                symbols: detectedSymbols,
                keywords,
                mood: {
                    positive: positiveScore,
                    negative: negativeScore,
                    neutral: Math.max(0, 5 - positiveScore - negativeScore)
                },
                interpretation: generateInterpretation(dreamType, detectedSymbols, positiveScore, negativeScore),
                advice: generateAdvice(dreamType, positiveScore, negativeScore)
            };
        }
        
        function generateInterpretation(dreamType, symbols, positive, negative) {
            const interpretations = {
                'È£õË°å„ÅÆÂ§¢': 'Ëá™Áî±„Å∏„ÅÆÂº∑„ÅÑÊÜß„Çå„Å®„ÄÅÁèæÂÆü„ÅÆÂà∂Á¥Ñ„Åã„Çâ„ÅÆËß£ÊîæÈ°òÊúõ„ÇíË°®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂâµÈÄ†ÊÄß„Å®ÂèØËÉΩÊÄß„Å∏„ÅÆÈñãÊîæÊÄß„ÇíÁ§∫ÂîÜ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                'ËøΩË∑°„ÅÆÂ§¢': 'ÁèæÂÆüÁîüÊ¥ª„Åß„ÅÆ„Éó„É¨„ÉÉ„Ç∑„É£„Éº„ÇÑ„Çπ„Éà„É¨„Çπ„ÇíÂèçÊò†„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰Ωï„Åã„Åã„ÇâÈÄÉ„Çå„Åü„ÅÑÊ∞óÊåÅ„Å°„ÇÑ„ÄÅÂØæÂá¶„Åô„Åπ„ÅçÂïèÈ°å„Åå„ÅÇ„Çã„Åì„Å®„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                'Ê∞¥„ÅÆÂ§¢': 'ÊÑüÊÉÖ„ÅÆÊµÅ„Çå„ÇÑÁÑ°ÊÑèË≠ò„ÅÆÂãï„Åç„ÇíË°®Áèæ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂøÉ„ÅÆÊµÑÂåñ„ÇÑÊÑüÊÉÖÁöÑ„Å™Â§âÂåñ„ÅÆÊôÇÊúü„Å´„ÅÇ„Çã„Åì„Å®„ÇíÁ§∫ÂîÜ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                'ËêΩ‰∏ã„ÅÆÂ§¢': '„Ç≥„É≥„Éà„É≠„Éº„É´„ÅÆÂñ™Â§±„Å∏„ÅÆ‰∏çÂÆâ„ÇÑ„ÄÅÁèæÂÆü„Åß„ÅÆ‰∏çÂÆâÂÆöÊÑü„ÇíË°®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂ§âÂåñ„Å∏„ÅÆÊÅê„Çå„ÇíÁ§∫„Åó„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'Êó•Â∏∏ÁöÑ„Å™Â§¢': 'Êó•Â∏∏ÁîüÊ¥ª„ÅÆÂá¶ÁêÜ„Å®Êï¥ÁêÜ„ÇíË°å„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇÂøÉ„ÅÆ„Éê„É©„É≥„Çπ„Åå‰øù„Åü„Çå„Å¶„ÅÑ„ÇãÁä∂ÊÖã„ÇíÁ§∫ÂîÜ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ'
            };
            
            let base = interpretations[dreamType] || interpretations['Êó•Â∏∏ÁöÑ„Å™Â§¢'];
            
            if (positive > negative) {
                base += ' ÂÖ®‰ΩìÁöÑ„Å´„Éù„Ç∏„ÉÜ„Ç£„Éñ„Å™„Ç®„Éç„É´„ÇÆ„Éº„Å´Ê∫Ä„Å°„Å¶„Åä„Çä„ÄÅÂøÉ„ÅÆÁä∂ÊÖã„ÅØËâØÂ•Ω„Åß„Åô„ÄÇ';
            } else if (negative > positive) {
                base += ' ‰∏ÄÊôÇÁöÑ„Å™„Çπ„Éà„É¨„Çπ„ÇÑ‰∏çÂÆâ„ÇíÊä±„Åà„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Çª„É´„Éï„Ç±„Ç¢„ÇíÂøÉ„Åå„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ';
            } else {
                base += ' ÊÑüÊÉÖ„ÅÆ„Éê„É©„É≥„Çπ„ÅåÂèñ„Çå„Å¶„Åä„Çä„ÄÅÂÆâÂÆö„Åó„ÅüÂøÉÁêÜÁä∂ÊÖã„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ';
            }
            
            return base;
        }
        
        function generateAdvice(dreamType, positive, negative) {
            const advices = {
                'È£õË°å„ÅÆÂ§¢': 'ÂâµÈÄ†ÁöÑ„Å™Ê¥ªÂãï„Å´ÊôÇÈñì„ÇíÂâ≤„ÅÑ„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÊñ∞„Åó„ÅÑÊåëÊà¶„Åå„ÅÇ„Å™„Åü„ÇíÂæÖ„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                'ËøΩË∑°„ÅÆÂ§¢': '„Çπ„Éà„É¨„ÇπËß£Ê∂à„ÅÆÊôÇÈñì„Çí‰Ωú„Çä„ÄÅÂïèÈ°å„Å´Ê≠£Èù¢„Åã„ÇâÂêë„ÅçÂêà„ÅÜÂãáÊ∞ó„ÇíÊåÅ„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                'Ê∞¥„ÅÆÂ§¢': 'ÊÑüÊÉÖ„ÇíÂ§ßÂàá„Å´„Åó„ÄÅÁõ¥ÊÑü„Å´Âæì„Å£„Å¶Ë°åÂãï„Åô„Çã„Åì„Å®„ÅåÂêâ„Å®„Å™„Çã„Åß„Åó„Çá„ÅÜ„ÄÇ',
                'ËêΩ‰∏ã„ÅÆÂ§¢': '„Ç∞„É©„Ç¶„É≥„Éá„Ç£„É≥„Ç∞„ÇíÊÑèË≠ò„Åó„ÄÅÂÆâÂÆö„Åó„ÅüÂü∫Áõ§„ÇíÁØâ„Åè„Åì„Å®„Å´Ê≥®Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                'Êó•Â∏∏ÁöÑ„Å™Â§¢': 'ÁèæÂú®„ÅÆÁîüÊ¥ª„É™„Ç∫„É†„ÇíÁ∂≠ÊåÅ„Åó„ÄÅÂ∞è„Åï„Å™Âπ∏„Åõ„ÇíÂ§ßÂàá„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'
            };
            
            return advices[dreamType] || advices['Êó•Â∏∏ÁöÑ„Å™Â§¢'];
        }
        
        function displayAnalysis(analysis) {
            let html = `
                <div class="analysis-result">
                    <h3>üé≠ Â§¢„ÅÆ„Çø„Ç§„Éó: ${analysis.dreamType}</h3>
                    <p>${analysis.interpretation}</p>
                </div>
                
                <div class="mood-indicator">
                    <div class="mood-item">
                        <span class="mood-emoji">üòä</span>
                        <div class="mood-label">„Éù„Ç∏„ÉÜ„Ç£„Éñ</div>
                        <div class="mood-value">${analysis.mood.positive}</div>
                    </div>
                    <div class="mood-item">
                        <span class="mood-emoji">üòê</span>
                        <div class="mood-label">‰∏≠ÊÄß</div>
                        <div class="mood-value">${analysis.mood.neutral}</div>
                    </div>
                    <div class="mood-item">
                        <span class="mood-emoji">üò∞</span>
                        <div class="mood-label">„Éç„Ç¨„ÉÜ„Ç£„Éñ</div>
                        <div class="mood-value">${analysis.mood.negative}</div>
                    </div>
                </div>
            `;
            
            if (analysis.symbols.length > 0) {
                html += '<h3>üîÆ Ê§úÂá∫„Åï„Çå„Åü„Ç∑„É≥„Éú„É´</h3><div class="symbol-grid">';
                analysis.symbols.forEach(symbol => {
                    html += `
                        <div class="symbol-card">
                            <span class="symbol-emoji">${symbol.emoji}</span>
                            <div class="symbol-name">${symbol.name}</div>
                            <div class="symbol-meaning">${symbol.meaning}</div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            if (analysis.keywords.length > 0) {
                html += '<h3>üîç „Ç≠„Éº„ÉØ„Éº„Éâ</h3><div class="keywords">';
                analysis.keywords.forEach(keyword => {
                    html += `<span class="keyword">${keyword}</span>`;
                });
                html += '</div>';
            }
            
            html += `
                <div class="analysis-result">
                    <h3>üí° „Ç¢„Éâ„Éê„Ç§„Çπ</h3>
                    <p>${analysis.advice}</p>
                </div>
            `;
            
            document.getElementById('analysisResult').innerHTML = html;
        }
        
        function saveDream() {
            const dreamText = document.getElementById('dreamText').value.trim();
            
            if (!dreamText) {
                alert('‰øùÂ≠ò„Åô„ÇãÂ§¢„ÅÆÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const dream = {
                id: Date.now(),
                date: new Date().toLocaleDateString('ja-JP'),
                time: new Date().toLocaleTimeString('ja-JP'),
                content: dreamText,
                analysis: null
            };
            
            dreamHistory.unshift(dream);
            localStorage.setItem('dreamHistory', JSON.stringify(dreamHistory));
            
            updateHistoryDisplay();
            updateStats();
            
            alert('Â§¢„Åå‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ');
        }
        
        function clearInput() {
            document.getElementById('dreamText').value = '';
            document.getElementById('analysisResult').innerHTML = `
                <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.6);">
                    <span style="font-size: 3rem;">üåô</span>
                    <p>Â§¢„ÅÆÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶ÂàÜÊûê„Éú„Çø„É≥„ÇíÊäº„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                </div>
            `;
        }
        
        function updateHistoryDisplay() {
            const historyList = document.getElementById('dreamHistoryList');
            
            if (dreamHistory.length === 0) {
                historyList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.6);">
                        „Åæ„Å†Â§¢„ÅåË®òÈå≤„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇÊúÄÂàù„ÅÆÂ§¢„ÇíË®òÈå≤„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ
                    </div>
                `;
                return;
            }
            
            let html = '';
            dreamHistory.slice(0, 10).forEach(dream => {
                const preview = dream.content.length > 100 
                    ? dream.content.substring(0, 100) + '...'
                    : dream.content;
                
                html += `
                    <div class="history-item" onclick="loadDream(${dream.id})">
                        <div class="history-date">${dream.date} ${dream.time}</div>
                        <div class="history-preview">${preview}</div>
                    </div>
                `;
            });
            
            historyList.innerHTML = html;
        }
        
        function loadDream(dreamId) {
            const dream = dreamHistory.find(d => d.id === dreamId);
            if (dream) {
                document.getElementById('dreamText').value = dream.content;
                if (dream.analysis) {
                    displayAnalysis(dream.analysis);
                }
            }
        }
        
        function updateStats() {
            document.getElementById('totalDreams').textContent = dreamHistory.length;
            
            if (dreamHistory.length > 0) {
                // Âπ≥ÂùáÊñáÂ≠óÊï∞Ë®àÁÆó
                const avgLength = Math.round(
                    dreamHistory.reduce((sum, dream) => sum + dream.content.length, 0) / dreamHistory.length
                );
                document.getElementById('avgLength').textContent = avgLength;
                
                // ‰∏ÄËà¨ÁöÑ„Å™Ê∞óÂàÜÔºà„É©„É≥„ÉÄ„É†„ÅßË®≠ÂÆöÔºâ
                const moods = ['üò¥', 'üòä', 'üò∞', 'ü§î', 'üòå'];
                document.getElementById('commonMood').textContent = moods[Math.floor(Math.random() * moods.length)];
                
                // ÈÄ£Á∂öË®òÈå≤Êó•Êï∞ÔºàÁ∞°ÊòìË®àÁÆóÔºâ
                document.getElementById('streakDays').textContent = Math.min(dreamHistory.length, 30);
            }
        }
        
        // ÂàùÊúüÂåñ
        updateHistoryDisplay();
        updateStats();
        
        // „Ç®„É≥„Çø„Éº„Ç≠„Éº„Åß„ÅÆÈÄÅ‰ø°Èò≤Ê≠¢
        document.getElementById('dreamText').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                analyzeDream();
            }
        });
    </script>
</body>
</html> 